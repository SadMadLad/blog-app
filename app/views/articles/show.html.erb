<% if flash[:alert] %>
    <div class="alert alert-danger">
        <%= flash[:alert] %>
    </div>
<% end %>
<article class="card container p-3">
 <!--   <div class="card-header p-2 m-0 bg-white">
        <span class="">Article Likes: <%= @article.likes.count() %></span>
            <% if user_signed_in? %>
            <% like = current_user.likes.find_by(likeable: @article )%>
            <% if like %>
                <%= link_to "Unlike", like_path(like), :method => :delete, class: "btn btn-danger"%>
            <% else %>
                <%= form_with(model: Like.new, method: :post, class: "d-inline") do |form|%>
                    <%= form.hidden_field :likeable_id, value: @article.id %>
                    <%= form.hidden_field :likeable_type, value: "Article" %>
                    <%= form.submit "Like", class: "btn btn-info d-inline" %>
                <% end %>
            <% end %>
        <% end %> 
    </div> -->
    <h1><%= @article.title %></h1>
    
    <% if @article.image.attached? %>
        <%= image_tag @article.image, class: "rounded img-fluid" %>
    <% end %>

    <section class="mt-3">
        <%= @article.body %>
    </section>

    <div class="my-3">
        <h1 class="container">Comment Section</h1>
        <div class="new-comment container">
        </div>
        <div class="container-fluid my-3">
            <h1 class="text-center">Comments</h1>
            <% if user_signed_in? %>
                <%= form_with model: [@article, @article.comments.build] do |form|%>
                    <%= render "comment_form", :form => form%>
                <% end %>
            <% end %>
            
            <div class="comments container">
                    <% @article.comments.each do |comment| %>
                        <% unless comment.parent_id %>
                            <%= render 'comment', :comment => comment, :article => @article %>
                        <% end %>
                    <% end %>
            </div>
        </div>
    </div>
</article>